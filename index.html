<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/index.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Aldrich&family=Manrope&display=swap" rel="stylesheet"> 
    <title>Document</title>
</head>

<body>
    <header>
        <ul class="Navegador">
            <li class="Navegador-links">
                <a class="Navegador-links-link" href="index.html">Administrador de Tareas</a>
            </li>
            <li class="Navegador-links">
                <a class="Navegador-links-link" href="">Lista de usuarios</a>
            </li>
        </ul>
    </header>

    <div class="ContenedorCentral">
        <div class="ContenedorCentral-tareas">

            <div class="ContenedorCentral-tareas-btns">
                <button class="ContenedorCentral-tareas-btns-btn is-active" id="btn_completas">Completas</button>
                <button class="ContenedorCentral-tareas-btns-btn" id="btn_pendientes">Pendientes</button>
            </div>

            <div id="completas">

                <div class="ContenedorCentral-tareas-tarea">
                        <img src="./images/brand.jpg" class="ContenedorCentral-tareas-tarea-img" alt="brand">
                        <div class="ContenedorCentral-tareas-tarea-contenido">
                                <div class="ContenedorCentral-tareas-tarea-contenido-cuadroSuperior">
                                    <h1 class="H1Tarjeta">Título Tarea</h1>
                                    <p class="PTarjeta">Lorem ipsum dolor sit amet consectetur 
                                        adipisicing elit. Accusantium, natus aspernatur. 
                                        Minus, a eius eaque reprehenderit sapiente dolore 
                                        ullam earum vitae? Consequatur veritatis impedit
                                        temporibus perspiciatis, autem sint delectus 
                                        molestiae.
                                    </p>
                                </div>
                                <div class="ContenedorCentral-tareas-tarea-contenido-cuadroInferior">

                                    <div class="ContenedorCentral-imges">
                                        <img class="ContenedorCentral-imges-img" src="./images/300-1 copy.jpg" alt="user1">
                                        <img class="ContenedorCentral-imges-img" src="./images/300-2 copy.jpg" alt="user1">
                                        <img class="ContenedorCentral-imges-img" src="./images/300-6 copy.jpg" alt="user1">

                                    </div>
                                    <div>


                                    </div>
                                </div>
                                
                        </div>
                </div>
                <div class="ContenedorCentral-tareas-tarea">

                </div>
                <div class="ContenedorCentral-tareas-tarea">

                </div>
                <div class="ContenedorCentral-tareas-tarea">

                </div>
            </div>

            <div id="pendientes" class="isnt-shown">

                <div class="ContenedorCentral-tareas-tarea--red">

                </div>
                <div class="ContenedorCentral-tareas-tarea--red">

                </div>
                <div class="ContenedorCentral-tareas-tarea--red">

                </div>
                <div class="ContenedorCentral-tareas-tarea--red">

                </div>
            </div>


        </div>

        <div class="ContenedorCentral-stats">
            <div>STATS</div>
            <div class="ContenedorCentral-stats-log">

                <div class="ContenedorCentral-stats-log-pantalla" id="log"></div>
            </div>
        </div>
    </div>

    <button class="u-fixed" id="boton">Nueva Tarea</button>

    <div class="u-centrar">
        <form id="form" class="Form isnt-shown" action="index.html" method="get">
            <label for="">Título</label><br />
            <input class="Form-input u-borderBlue" type="text" name="tit" id="tit" />

            <br /><br />

            <label for="">Descripción</label><br />
            <textarea class="Form-input u-borderBlue" rows="4" cols="50" name="description" id="desc" form="form">
        </textarea>

            <br /><br />

            <label for="">Fecha de vencimiento</label><br />
            <input class="Form-input u-borderBlue" type="date" name="date" id="date" />

            <br /><br />

            <label for="cars" class=" u-marginTop15">Creador de proyecto:</label>
            <select id="creator" class="Form-input u-borderBlue">
                <option value="Pedro">Pedro</option>
                <option value="Sara">Sara</option>
                <option value="María">María</option>
            </select>

            <br /><br />

            <label class="u-marginTop15">Usuarios en el proyecto</label>
            <div class="Form-buttons">
                <button class="Form-buttons-button" type="button" id="user1" value="Pedro">
                    Pedro
                </button>
                <button class="Form-buttons-button" type="button" id="user2" value="Sara">
                    Sara
                </button>
                <button class="Form-buttons-button" type="button" id="user3" value="María">
                    María
                </button>
            </div>

            <button class="u-marginTop ContenedorCentral-tareas-btns-btn u-width100 u-backBlue" type="submit" onclick="cerrar()">
                Crear Tarea
            </button>
        </form>
    </div>
</body>

<script>

    /*
        Variables
    */
    var boton = document.getElementById("boton");
    var form = document.getElementById("form");
    var botonesUser = document.querySelectorAll(".Form-buttons-button");

    var botonCompletas = document.getElementById("btn_completas");
    var botonPendientes = document.getElementById("btn_pendientes");

    var divCompletas = document.getElementById("completas");
    var divPendientes = document.getElementById("pendientes");

    var vectorlog = [];

    /*
        Funciones
    */
    boton.addEventListener("click", () => {
        form.classList.toggle("isnt-shown");
    });

    botonCompletas.addEventListener("click", () => {
        divCompletas.classList.remove("isnt-shown");
        botonCompletas.classList.add("is-active");
        divPendientes.classList.add("isnt-shown");
        botonPendientes.classList.remove("is-active");

    });

    botonPendientes.addEventListener("click", () => {
        divCompletas.classList.add("isnt-shown");
        botonCompletas.classList.remove("is-active");
        divPendientes.classList.remove("isnt-shown");
        botonPendientes.classList.add("is-active");

    });

    botonesUser.forEach((btn) => {
        btn.addEventListener("click", () => {
            btn.classList.toggle("is-active");
        });
    });

    function cerrar() {
        form.classList.add("isnt-shown");
    }

    /*
        YTratamiento de datos del form
    */
    form.addEventListener("submit", (e) => {
        e.preventDefault();
        var botonesActivos = [];

        botonesUser.forEach((btn) => {
            if (btn.classList.contains("is-active")) {
                botonesActivos.push(btn.value);
            }
        });

        //console.log(botonesActivos);

        let tit = document.getElementById("tit").value;
        let desc = document.getElementById("desc").value;
        let date = document.getElementById("date").value;
        let creator = document.getElementById("creator").value;

        vectorlog.push(`<div class="LogText--date">
                            ${date}
                        </div>
                  
                        <div class="LogText">
                            ${creator} ha creado la tarea: "${tit}" para ${botonesActivos}
                        </div> <hr>`);

        document.getElementById("log").innerHTML = vectorlog.join('');

        //Reiniciamos el form
        document.getElementById("tit").value = '';
        document.getElementById("desc").value = '';
        document.getElementById("date").value = '';
        document.getElementById("creator").value = '';

        botonesUser.forEach((btn) => {

            btn.classList.remove("is-active");

        });

    });
</script>

</html>